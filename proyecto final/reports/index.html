<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:12,&quot;tests&quot;:10,&quot;passes&quot;:10,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2024-08-06T16:13:09.357Z&quot;,&quot;end&quot;:&quot;2024-08-06T16:13:28.490Z&quot;,&quot;duration&quot;:19133,&quot;testsRegistered&quot;:10,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;39fdcff0-9f2f-46ff-85b7-9262e98665af&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1809,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Conectar a la base de datos\nawait mongoose.connect(MONGODB_CNX_STR);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a377abc4-fa77-49db-a80d-f70e69580a83&quot;,&quot;parentUUID&quot;:&quot;39fdcff0-9f2f-46ff-85b7-9262e98665af&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Desconectar de la base de datos\nawait mongoose.disconnect();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d14a3fb6-5c20-446c-851d-94fccd78dfd7&quot;,&quot;parentUUID&quot;:&quot;39fdcff0-9f2f-46ff-85b7-9262e98665af&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after each\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1008,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;this.timeout(10000);\n// Limpiar colecciones después de cada prueba\nconst collections = await mongoose.connection.db\n    .listCollections()\n    .toArray();\nawait mongoose.connection.db.collection(&#x27;productos&#x27;).deleteMany({});\nawait mongoose.connection.db.collection(&#x27;carritos&#x27;).deleteMany({});\nawait mongoose.connection.db.collection(&#x27;sessions&#x27;).deleteMany({});\nawait mongoose.connection.db.collection(&#x27;usuarios&#x27;).deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0070aff8-693a-49e1-8ae1-7b1646037a63&quot;,&quot;parentUUID&quot;:&quot;39fdcff0-9f2f-46ff-85b7-9262e98665af&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ba733888-ce95-426b-94fb-791149286187&quot;,&quot;title&quot;:&quot;Testing productos:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\Coder Houser\\proyectos coderhouse\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ac4e98ff-8cc9-4493-8560-b4218cdc0e8a&quot;,&quot;title&quot;:&quot;Agregar un producto:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\Coder Houser\\proyectos coderhouse\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería agregar un producto correctamente&quot;,&quot;fullTitle&quot;:&quot;Testing productos: Agregar un producto: debería agregar un producto correctamente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:543,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const producto = {\n    title: &#x27;Casa&#x27;,\n    description: &#x27;Descripción de la casa&#x27;,\n    price: 4241,\n    thumbnail: &#x27;url-de-imagen&#x27;,\n    code: `unique-code-${Date.now()}`,\n    stock: 10,\n    category: &#x27;Inmuebles&#x27;,\n    status: true,\n    owner: &#x27;user@example.com&#x27;,\n};\nconst { statusCode, body } = await requester.post(&#x27;/api/productos&#x27;).send(producto);\nexpect(statusCode).to.equal(200);\nexpect(body).to.have.property(&#x27;_id&#x27;);\nexpect(body).to.have.property(&#x27;title&#x27;, &#x27;Casa&#x27;);\n// Validaciones adicionales de los campos&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8492876-d2e7-45f5-9be0-a6432dc053de&quot;,&quot;parentUUID&quot;:&quot;ac4e98ff-8cc9-4493-8560-b4218cdc0e8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e8492876-d2e7-45f5-9be0-a6432dc053de&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:543,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b85e87ed-bac5-41d1-9ca1-5f4985efae47&quot;,&quot;title&quot;:&quot;Obtener productos:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\Coder Houser\\proyectos coderhouse\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería obtener una lista de productos&quot;,&quot;fullTitle&quot;:&quot;Testing productos: Obtener productos: debería obtener una lista de productos&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:183,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { statusCode, body } = await requester.get(&#x27;/api/productos&#x27;);\nexpect(statusCode).to.equal(200);\nexpect(body).to.be.an(&#x27;array&#x27;);\nbody.forEach(producto =&gt; {\n    expect(producto).to.have.property(&#x27;_id&#x27;);\n    expect(producto).to.have.property(&#x27;title&#x27;);\n    // Validaciones adicionales de los campos\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2fef177-b28d-4177-8da2-80c6475fe750&quot;,&quot;parentUUID&quot;:&quot;b85e87ed-bac5-41d1-9ca1-5f4985efae47&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a2fef177-b28d-4177-8da2-80c6475fe750&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:183,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d9d247e2-cdf5-4cff-a67a-6d56c4ceb8e6&quot;,&quot;title&quot;:&quot;Eliminar un producto:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\Coder Houser\\proyectos coderhouse\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería eliminar un producto correctamente&quot;,&quot;fullTitle&quot;:&quot;Testing productos: Eliminar un producto: debería eliminar un producto correctamente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:558,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const producto = {\n    title: &#x27;Auto&#x27;,\n    description: &#x27;Descripción del auto&#x27;,\n    price: 15000,\n    thumbnail: &#x27;url-de-imagen&#x27;,\n    code: `unique-code-${Date.now()}`,\n    stock: 5,\n    category: &#x27;Vehículos&#x27;,\n    status: true,\n    owner: &#x27;user@example.com&#x27;,\n};\nconst { body: productoAgregado } = await requester.post(&#x27;/api/productos&#x27;).send(producto);\nconst { _id } = productoAgregado;\nconst { statusCode, body } = await requester.delete(`/api/productos/${_id}`);\nexpect(statusCode).to.equal(200);\nexpect(body).to.have.property(&#x27;message&#x27;).that.includes(&#x27;Se eliminó el producto&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63240359-790c-4e57-b588-a222d3da6c4d&quot;,&quot;parentUUID&quot;:&quot;d9d247e2-cdf5-4cff-a67a-6d56c4ceb8e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;63240359-790c-4e57-b588-a222d3da6c4d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:558,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;29e7d92c-4be2-4916-9332-6a8095a8eec5&quot;,&quot;title&quot;:&quot;testing carritos:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\Coder Houser\\proyectos coderhouse\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;eef99680-51fd-479e-b645-ecbef3d59f16&quot;,&quot;title&quot;:&quot;Crear un producto:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\Coder Houser\\proyectos coderhouse\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;crear carrito&quot;,&quot;fullTitle&quot;:&quot;testing carritos: Crear un producto: crear carrito&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:366,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const { statusCode, ok, body } = await requester.post(\n    &#x27;/api/carrito/:userId&#x27;\n);\nexpect(statusCode).to.equal(200);\nexpect(ok).to.be.true;\nexpect(body).to.be.an(&#x27;object&#x27;); // Espera un objeto en lugar de un array\nexpect(body).to.have.property(&#x27;carrito&#x27;);\nexpect(body.carrito).to.be.an(&#x27;object&#x27;); // Asegúrate de que &#x27;carrito&#x27; sea un objeto&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2df48f3-9a8f-456e-aa21-dfe47e5cd12c&quot;,&quot;parentUUID&quot;:&quot;eef99680-51fd-479e-b645-ecbef3d59f16&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a2df48f3-9a8f-456e-aa21-dfe47e5cd12c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:366,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;68bf610d-8f10-42cc-8eda-464c8ee939fb&quot;,&quot;title&quot;:&quot;Agregar un producto al carrito:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\Coder Houser\\proyectos coderhouse\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería agregar un producto al carrito correctamente&quot;,&quot;fullTitle&quot;:&quot;testing carritos: Agregar un producto al carrito: debería agregar un producto al carrito correctamente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:846,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Primero, crea un carrito para agregar productos\nconst carritoResponse = await requester.post(&#x27;/api/carrito/1234&#x27;); \n      \nconst carritoId = carritoResponse.body.carrito._id;\n    \n// Luego, agrega un producto al carrito\nconst producto = {\n    producto :{\n        _id: &#x27;ofdskafok34&#x27;,\n        title: &#x27;casa&#x27;,\n        description: &#x27;adsfads&#x27;,\n        price: 4241,\n        thumbnail: &#x27;dsa234&#x27;,\n        code: `unique-code-${Date.now()}`,\n        stock: 3241,\n        category: &#x27;dsfa&#x27;,\n        status: true,\n        owner: &#x27;joaquin.ariel.lopez.98@gmail.com&#x27;,\n    }\n}\n \nconst { statusCode, ok, body } = await requester\n    .post(`/api/carrito/addProduct/${carritoId}`)\n    .send(producto);\nexpect(statusCode).to.equal(200);\nexpect(ok).to.be.true;\nexpect(body).to.be.an(&#x27;object&#x27;);\nexpect(body).to.have.property(&#x27;carrito&#x27;);\nexpect(body.carrito).to.be.an(&#x27;object&#x27;); // O ajusta según la estructura que devuelves&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cbe397e5-5296-42c8-801a-3c687c45c5ec&quot;,&quot;parentUUID&quot;:&quot;68bf610d-8f10-42cc-8eda-464c8ee939fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cbe397e5-5296-42c8-801a-3c687c45c5ec&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:846,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;56b82f5b-5507-416b-8b88-fc72466b5edd&quot;,&quot;title&quot;:&quot;Eliminar un producto del carrito:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\Coder Houser\\proyectos coderhouse\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería eliminar un producto del carrito correctamente&quot;,&quot;fullTitle&quot;:&quot;testing carritos: Eliminar un producto del carrito: debería eliminar un producto del carrito correctamente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1153,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Primero, crea un carrito para agregar productos\nconst carritoResponse = await requester.post(&#x27;/api/carrito/1234&#x27;);\nconst carritoId = carritoResponse.body.carrito._id;\n// Luego, agrega un producto al carrito\nconst producto = {\n    producto: {\n        _id: &#x27;ofdskafok34&#x27;,\n        title: &#x27;casa&#x27;,\n        description: &#x27;adsfads&#x27;,\n        price: 4241,\n        thumbnail: &#x27;dsa234&#x27;,\n        code: `unique-code-${Date.now()}`,\n        stock: 3241,\n        category: &#x27;dsfa&#x27;,\n        status: true,\n        owner: &#x27;joaquin.ariel.lopez.98@gmail.com&#x27;,\n    }\n};\nawait requester\n    .post(`/api/carrito/addProduct/${carritoId}`)\n    .send(producto);\n// Luego, elimina el producto agregado\nconst { statusCode, ok, body } = await requester.delete(`/api/carrito/${carritoId}/ofdskafok34`);\nexpect(statusCode).to.equal(200);\nexpect(ok).to.be.true;\nexpect(body).to.be.an(&#x27;object&#x27;); // Ajusta según la estructura que devuelves\nexpect(body).to.have.property(&#x27;_id&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c5f149d-366a-486c-a62f-39869e84d03f&quot;,&quot;parentUUID&quot;:&quot;56b82f5b-5507-416b-8b88-fc72466b5edd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2c5f149d-366a-486c-a62f-39869e84d03f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1153,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1a2b189b-8e42-4bc6-9791-379eaf424632&quot;,&quot;title&quot;:&quot;Testing sesiones:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\Coder Houser\\proyectos coderhouse\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;56fe2d97-f3a9-4308-9133-1b9d44c5a9b7&quot;,&quot;title&quot;:&quot;Iniciar sesión:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\Coder Houser\\proyectos coderhouse\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería iniciar sesión correctamente&quot;,&quot;fullTitle&quot;:&quot;Testing sesiones: Iniciar sesión: debería iniciar sesión correctamente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1708,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const datos = {\n    nombre: &#x27;x&#x27;,\n    apellido: &#x27;x&#x27;,\n    email: &#x27;x@x.com&#x27;,\n    password: &#x27;1234&#x27;,\n};\nawait requester.post(&#x27;/api/usuarios&#x27;).send(datos);\nconst { statusCode, text } = await requester\n    .post(&#x27;/api/sesiones&#x27;)\n    .send({ email: &#x27;x@x.com&#x27;, password: &#x27;1234&#x27; });\nconst body = JSON.parse(text);\nexpect(statusCode).to.equal(201);\nexpect(body).to.have.property(&#x27;message&#x27;, &#x27;login success&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03c9e7ac-744c-4024-9cc6-b9234ed52f86&quot;,&quot;parentUUID&quot;:&quot;56fe2d97-f3a9-4308-9133-1b9d44c5a9b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;debería fallar con credenciales incorrectas&quot;,&quot;fullTitle&quot;:&quot;Testing sesiones: Iniciar sesión: debería fallar con credenciales incorrectas&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const credentials = {\n    username: &#x27;usuario&#x27;,\n    password: &#x27;password&#x27;,\n};\nconst { statusCode, body } = await requester\n    .post(&#x27;/api/sesiones&#x27;)\n    .send(credentials);\nexpect(statusCode).to.equal(401);\nexpect(body).to.have.property(&#x27;status&#x27;, &#x27;error&#x27;);\nexpect(body).to.have.property(&#x27;message&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b23db4ef-5980-4756-8a5b-955fc809072b&quot;,&quot;parentUUID&quot;:&quot;56fe2d97-f3a9-4308-9133-1b9d44c5a9b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;03c9e7ac-744c-4024-9cc6-b9234ed52f86&quot;,&quot;b23db4ef-5980-4756-8a5b-955fc809072b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1716,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1e6c9895-f5fa-4e95-8ac4-8e9b7471bf53&quot;,&quot;title&quot;:&quot;Obtener sesión actual:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\Coder Houser\\proyectos coderhouse\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería obtener la sesión actual&quot;,&quot;fullTitle&quot;:&quot;Testing sesiones: Obtener sesión actual: debería obtener la sesión actual&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2248,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const datos = {\n    nombre: &#x27;x&#x27;,\n    apellido: &#x27;x&#x27;,\n    email: &#x27;x@x.com&#x27;,\n    password: &#x27;1234&#x27;,\n};\n// Registrar el usuario\nawait requester.post(&#x27;/api/usuarios&#x27;).send(datos);\nconst loginResponse = await requester\n    .post(&#x27;/api/sesiones&#x27;)\n    .send({ email: &#x27;x@x.com&#x27;, password: &#x27;1234&#x27; });\nconst cookies = loginResponse.headers[&#x27;set-cookie&#x27;];\nconst response = await requester\n    .get(&#x27;/api/usuarios/current&#x27;)\n    .set(&#x27;Cookie&#x27;, cookies); \nconst { statusCode, body } = response;\nexpect(statusCode).to.equal(200); \nexpect(body).to.have.property(&#x27;payload&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;438b95ee-f525-40cb-b320-b3a848c35eae&quot;,&quot;parentUUID&quot;:&quot;1e6c9895-f5fa-4e95-8ac4-8e9b7471bf53&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;438b95ee-f525-40cb-b320-b3a848c35eae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2248,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:5000},{&quot;uuid&quot;:&quot;28a6ae95-6ac2-4063-8cb0-54f8870afd73&quot;,&quot;title&quot;:&quot;Cerrar sesión:&quot;,&quot;fullFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\Coder Houser\\proyectos coderhouse\\proyecto final\\test\\super.test.js&quot;,&quot;file&quot;:&quot;\\test\\super.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;debería cerrar sesión correctamente&quot;,&quot;fullTitle&quot;:&quot;Testing sesiones: Cerrar sesión: debería cerrar sesión correctamente&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:188,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const credentials = {\n    username: &#x27;testuser&#x27;,\n    password: &#x27;testpassword&#x27;\n};\nawait requester.post(&#x27;/api/sesiones&#x27;).send(credentials);\nconst { statusCode, body } = await requester.delete(&#x27;/api/sesiones/current&#x27;);\nexpect(statusCode).to.equal(200);\nexpect(body).to.have.property(&#x27;status&#x27;, &#x27;success&#x27;);\nexpect(body).to.have.property(&#x27;message&#x27;, &#x27;logout OK&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4beb91a3-bd2f-4f9a-9286-e78096828a19&quot;,&quot;parentUUID&quot;:&quot;28a6ae95-6ac2-4063-8cb0-54f8870afd73&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4beb91a3-bd2f-4f9a-9286-e78096828a19&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:188,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.7.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;index&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;reports&quot;,&quot;reportFilename&quot;:&quot;index&quot;},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;index&quot;,&quot;reportDir&quot;:&quot;reports&quot;,&quot;reportTitle&quot;:&quot;proyecto final&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;reports\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\Coder Houser\\proyectos coderhouse\\proyecto final\\reports\\index.json&quot;,&quot;htmlFile&quot;:&quot;C:\\Users\\Tap\\Desktop\\Coder Houser\\proyectos coderhouse\\proyecto final\\reports\\index.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>